{% extends "base.html" %}

{% block content %}

<section class = "country-list">
    <div id="page-subheading">
        <h2>
            My Countries
        </h2>
        <a href="/countries">
            <button class="button">
                All
            </button>
        </a>
        <a href="/countries/visited">
            <button class="button">
                Visited
            </button>
        </a>
        <a href="/countries/wishlist">
            <button class="button">
                Wishlist
            </button>
        </a>
    </div>
    <div id = "add-country">
        <a href="/addcountry">
            <button class="button">
                &#10133; Add Country
            </button>
        </a>
    </div>
{% for country in countries %}
    <div class = "country-block">
        <div id="country-title">
            <h3>
                <a href="/countries/{{country.id}}">{{country.name}}</a>
            </h3>
            {% if country.visited == true %}
                <form action="/countries/{{country.id}}/visited" method="POST">
                <input type="submit" value="&#10003; Visited" class="visited-button">
                </form>    
            {% else %}
                <form action="/countries/{{country.id}}/visited" method="POST">
                <input type="submit" value="&#10060; Unvisited" class="visited-button">
                </form> 
            {% endif %}
            </div>
        <div id="country-entries">
            {% for entry in entries %}
                {% if entry.country.id == country.id %}
                    <p>
                        <a href="/countries/entries/{{entry.id}}">
                            {{ entry.title }}
                        </a>
                    </p>    
                {% endif %}
            {% endfor %}
            </p>
        </div>

        <div>
            <p id="block-buttons">
                <a href="/countries/{{country.id}}">
                    <button class="block-button">
                        View Country
                    </button>
                </a>
            </p>
            <p id="block-buttons">
                <a href="/countries/{{country.id}}/edit">
                    <button class="block-button">
                        Edit Country
                    </button>
                </a>
            </p>
            <p id="block-buttons">
                <form action="/countries/{{country.id}}/delete" method="POST">
                    <input type="submit" value="Delete Country" class="block-button">
                    </form> 
                </a>
            </p>
        </div>
    
    </div>

{% endfor %}
</section>

{% endblock %}